<div class="container" data-controller="demands-index">
  <h1 class= "title" ><%= current_user.first_name%>'s Dashboard</h1>

  <h2>Your contribution to the Warehouse</h2>
  <div class="add_material">
  <div class='card-demand-add-btn' data-action="click->demands-index#openAddModal"><i class="far fa-plus-square"></i> Add Material </div>
  </div>
  <div class="card-list">
    <% @materials.each do |material| %>
      <div class="card-trip-outside-frame">
          <% if material.available %>
            <span class="badge available">Available</span>
          <% else %>
            <span class="badge notavailable">In Use</span>
          <% end %>
        <div class="card-trip-index">
          <%= cl_image_tag material.photo.key, height: 300, width: 400, crop: :fill %>
          <div class="card-trip-index-infos">
            <div class="card-trip-title-username">
              <h2><%= link_to material.title, material_path(material) %></h2>
              <h2 class="card-trip-index-pricing"><%= material.user.user_name%></h2>
            </div>
            <%= cl_image_tag material.user.photo.key, crop: :fill, class: "card-trip-index-user avatar-bordered" %>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <h2>Your pending demands...</h2>
  <div class="card-demands" data-demands-index-target="list">
    <%= render 'demands/list', demands: @demands %>
   </div>

  <h2>Don't forget your commitment</h2>
  <% @acceptances.each do |acceptance| %>
    <div class="card-demand">
    <%= cl_image_tag acceptance.photo.key, crop: :fill, class: "card-trip-index-user avatar-bordered" %>
      <div class="card-demand-infos">
        <h2><%= acceptance.title %></h2>
        <p><%= acceptance.description %></p>
        <p><small><%= acceptance.requester.user_name %> - <%= acceptance.start_date.strftime("%a, %d %B, %Y") %></small></p>
        <i class="fa fa-info-circle card-more-info card-more-info-size" aria-hidden="true"></i>
      </div>
    </div>
  <% end %>

<!-- > Modal add demand  <!-->
  <div class='new-demand-container' data-demands-index-target='add'>
    <div class='add-demand-form'>
      <%= render 'materials/edit' %>
      <i class="fas fa-times close-add-demand-form" aria-hidden="true" data-action="click->demands-index#closeAddModal"></i>
    </div>
  </div>

  <!-- > Modal show demand  <!-->
  <div class="show-demand-container" data-demands-index-target='show'>
  </div>
</div>
